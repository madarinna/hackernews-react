{"ast":null,"code":"import _slicedToArray from\"/Users/nurulputri/Documents/GitHub/FE-2/hackernews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable react-hooks/exhaustive-deps */import{useState,useEffect}from\"react\";import{STORY_INCREMENT,MAX_STORIES}from\"../constants\";import{debounce}from\"../utils/debounce\";export var useInfiniteScroll=function useInfiniteScroll(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(STORY_INCREMENT),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var handleScroll=debounce(function(){if(window.innerHeight+document.documentElement.scrollTop!==document.documentElement.offsetHeight||loading){return false;}setLoading(true);},500);useEffect(function(){if(!loading)return;if(count+STORY_INCREMENT>=MAX_STORIES){setCount(MAX_STORIES);}else{setCount(count+STORY_INCREMENT);}setLoading(false);},[loading]);useEffect(function(){window.addEventListener(\"scroll\",handleScroll);return function(){return window.removeEventListener(\"scroll\",handleScroll);};},[]);return{count:count};};","map":{"version":3,"sources":["/Users/nurulputri/Documents/GitHub/FE-2/hackernews/src/hooks/useInfiniteScroll.js"],"names":["useState","useEffect","STORY_INCREMENT","MAX_STORIES","debounce","useInfiniteScroll","loading","setLoading","count","setCount","handleScroll","window","innerHeight","document","documentElement","scrollTop","offsetHeight","addEventListener","removeEventListener"],"mappings":"yKAAA,gDACA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,eAAT,CAA0BC,WAA1B,KAA6C,cAA7C,CACA,OAASC,QAAT,KAAyB,mBAAzB,CAEA,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,eACRL,QAAQ,CAAC,KAAD,CADA,wCAC/BM,OAD+B,eACtBC,UADsB,8BAEZP,QAAQ,CAACE,eAAD,CAFI,yCAE/BM,KAF+B,eAExBC,QAFwB,eAItC,GAAMC,CAAAA,YAAY,CAAGN,QAAQ,CAAC,UAAM,CACnC,GACCO,MAAM,CAACC,WAAP,CAAqBC,QAAQ,CAACC,eAAT,CAAyBC,SAA9C,GACCF,QAAQ,CAACC,eAAT,CAAyBE,YAD1B,EAEAV,OAHD,CAIE,CACD,MAAO,MAAP,CACA,CAEDC,UAAU,CAAC,IAAD,CAAV,CACA,CAV4B,CAU1B,GAV0B,CAA7B,CAYAN,SAAS,CAAC,UAAM,CACf,GAAI,CAACK,OAAL,CAAc,OAEd,GAAIE,KAAK,CAAGN,eAAR,EAA2BC,WAA/B,CAA4C,CAC3CM,QAAQ,CAACN,WAAD,CAAR,CACA,CAFD,IAEO,CACNM,QAAQ,CAACD,KAAK,CAAGN,eAAT,CAAR,CACA,CAEDK,UAAU,CAAC,KAAD,CAAV,CACA,CAVQ,CAUN,CAACD,OAAD,CAVM,CAAT,CAYAL,SAAS,CAAC,UAAM,CACfU,MAAM,CAACM,gBAAP,CAAwB,QAAxB,CAAkCP,YAAlC,EACA,MAAO,kBAAMC,CAAAA,MAAM,CAACO,mBAAP,CAA2B,QAA3B,CAAqCR,YAArC,CAAN,EAAP,CACA,CAHQ,CAGN,EAHM,CAAT,CAKA,MAAO,CAAEF,KAAK,CAALA,KAAF,CAAP,CACA,CAlCM","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { useState, useEffect } from \"react\";\nimport { STORY_INCREMENT, MAX_STORIES } from \"../constants\";\nimport { debounce } from \"../utils/debounce\";\n\nexport const useInfiniteScroll = () => {\n\tconst [loading, setLoading] = useState(false);\n\tconst [count, setCount] = useState(STORY_INCREMENT);\n\n\tconst handleScroll = debounce(() => {\n\t\tif (\n\t\t\twindow.innerHeight + document.documentElement.scrollTop !==\n\t\t\t\tdocument.documentElement.offsetHeight ||\n\t\t\tloading\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tsetLoading(true);\n\t}, 500);\n\n\tuseEffect(() => {\n\t\tif (!loading) return;\n\n\t\tif (count + STORY_INCREMENT >= MAX_STORIES) {\n\t\t\tsetCount(MAX_STORIES);\n\t\t} else {\n\t\t\tsetCount(count + STORY_INCREMENT);\n\t\t}\n\n\t\tsetLoading(false);\n\t}, [loading]);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener(\"scroll\", handleScroll);\n\t\treturn () => window.removeEventListener(\"scroll\", handleScroll);\n\t}, []);\n\n\treturn { count };\n};\n"]},"metadata":{},"sourceType":"module"}